!function(r){function n(t){if(e[t])return e[t].exports;var u=e[t]={i:t,l:!1,exports:{}};return r[t].call(u.exports,u,u.exports,n),u.l=!0,u.exports}var e={};n.m=r,n.c=e,n.i=function(r){return r},n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{configurable:!1,enumerable:!0,get:t})},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,n){return Object.prototype.hasOwnProperty.call(r,n)},n.p="",n(n.s=27)}({27:function(r,n,e){"use strict";function t(r,n){var e=n[1],t=n[0],u=Math.sqrt(t*t+e*e);if(u>r){var a=r/u;return[t*a,e*a]}return[t,e]}function u(r,n){return[n[0]*r,n[1]*r]}function a(r,n,e){for(var t=new Array(e),u=0,a=n;u<e;)t[u]=r[a],u=u+1|0,a=a+1|0;return t}function o(r,n){for(;;){var e=n,t=r,u=t.length,c=u||1,i=e.length,f=c-i|0;if(f){if(f<0){n=a(e,c,0|-f),r=t.apply(null,a(e,0,c));continue}return function(r,n){return function(e){return o(r,n.concat([e]))}}(t,e)}return t.apply(null,e)}}function c(r,n,e){if(e>7||e<0)return o(r,[n]);switch(e){case 0:case 1:return r(n);case 2:return function(e){return r(n,e)};case 3:return function(e,t){return r(n,e,t)};case 4:return function(e,t,u){return r(n,e,t,u)};case 5:return function(e,t,u,a){return r(n,e,t,u,a)};case 6:return function(e,t,u,a,o){return r(n,e,t,u,a,o)};case 7:return function(e,t,u,a,o,c){return r(n,e,t,u,a,o,c)}}}function i(r,n){var e=r.length;return 1===e?r(n):c(r,n,e)}function f(r,n,e,t){if(t>7||t<0)return o(r,[n,e]);switch(t){case 0:case 1:return o(r(n),[e]);case 2:return r(n,e);case 3:return function(t){return r(n,e,t)};case 4:return function(t,u){return r(n,e,t,u)};case 5:return function(t,u,a){return r(n,e,t,u,a)};case 6:return function(t,u,a,o){return r(n,e,t,u,a,o)};case 7:return function(t,u,a,o,c){return r(n,e,t,u,a,o,c)}}}function s(r,n,e){var t=r.length;return 2===t?r(n,e):f(r,n,e,t)}function l(r,n){return n.tag=r,n}function v(r){for(var n=0|r.length,e=new Array(n),t=0,u=n-1|0;t<=u;++t)e[t]=r[t];return e.tag=0|r.tag,e}function h(r,n){return r<n?-1:r===n?0:1}function d(r,n){for(;;){var e=n,t=r,u=typeof t,a=typeof e;if("string"===u){var o=t,c=e;return o<c?-1:o===c?0:1}var i=+("number"===u),f=+("number"===a);if(0!==i)return 0!==f?h(t,e):-1;if(0!==f)return 1;if("boolean"===u||"undefined"===u||null===t){var s=t,l=e;return s===l?0:s<l?-1:1}if("function"===u||"function"===a)throw[Cr,"compare: functional value"];var v=0|t.tag,g=0|e.tag;if(250!==v)if(250!==g){if(248===v)return h(t[1],e[1]);if(251===v)throw[Cr,"equal: abstract value"];if(v!==g)return v<g?-1:1;var w=0|t.length,p=0|e.length;if(w===p)for(var m=t,x=e,y=0,A=w;;){var b=y;if(b===A)return 0;var k=d(m[b],x[b]);if(0!==k)return k;y=b+1|0}else if(w<p)for(var M=t,C=e,_=0,S=w;;){var T=_;if(T===S)return-1;var D=d(M[T],C[T]);if(0!==D)return D;_=T+1|0}else for(var P=t,R=e,F=0,E=p;;){var I=F;if(I===E)return 1;var L=d(P[I],R[I]);if(0!==L)return L;F=I+1|0}}else n=e[0];else r=t[0]}}function g(r,n){return+(d(r,n)>=0)}function w(r,n){return+(d(r,n)<=0)}function p(r,n){if(0===n)throw _r;return r%n}function m(r){return r>=65?r>=97?r>=123?-1:r-87|0:r>=91?-1:r-55|0:r>57||r<48?-1:r-48|0}function x(r){switch(r){case 0:return 8;case 1:return 16;case 2:return 10;case 3:return 2}}function y(r){var n=1,e=2,t=0;"-"===r[t]&&(n=-1,t=t+1|0);var u=r.charCodeAt(t),a=r.charCodeAt(t+1|0);return 48===u&&(a>=89?98!==a?111!==a?120===a&&(e=1,t=t+2|0):(e=0,t=t+2|0):(e=3,t=t+2|0):66!==a?79!==a?a>=88&&(e=1,t=t+2|0):(e=0,t=t+2|0):(e=3,t=t+2|0)),[t,n,e]}function A(r){var n=y(r),e=n[0],t=x(n[2]),u=4294967295,a=r.length,o=e<a?r.charCodeAt(e):0,c=m(o);if(c<0||c>=t)throw[Mr,"int_of_string"];var i=function(n,e){for(;;){var o=e,c=n;if(o===a)return c;var i=r.charCodeAt(o);if(95!==i){var f=m(i);if(f<0||f>=t)throw[Mr,"int_of_string"];var s=t*c+f;if(s>u)throw[Mr,"int_of_string"];e=o+1|0,n=s}else e=o+1|0}},f=n[1]*i(c,e+1|0),s=0|f;if(10===t&&f!==s)throw[Mr,"int_of_string"];return s}function b(r){return r>=65&&r<=90||r>=192&&r<=214||r>=216&&r<=222?r+32|0:r}function k(r){var n=r.length;if(n>31)throw[Cr,"format_int: format too long"];for(var e=["+","-"," ",0,2,0,0,0,1,-1,"f"],t=0;;){var u=t;if(u>=n)return e;var a=r.charCodeAt(u),o=0;if(a>=69)if(a>=88)if(a>=121)o=1;else switch(a-88|0){case 0:e[4]=1,e[7]=1,t=u+1|0;continue;case 13:case 14:case 15:o=5;break;case 12:case 17:o=4;break;case 23:e[4]=0,t=u+1|0;continue;case 29:e[4]=2,t=u+1|0;continue;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 16:case 18:case 19:case 20:case 21:case 22:case 24:case 25:case 26:case 27:case 28:case 30:case 31:o=1;break;case 32:e[4]=1,t=u+1|0;continue}else{if(!(a>=72)){e[5]=1,e[7]=1,e[10]=String.fromCharCode(b(a)),t=u+1|0;continue}o=1}else{var c=a-32|0;if(c>25||c<0)o=1;else switch(c){case 3:e[3]=1,t=u+1|0;continue;case 0:case 11:o=2;break;case 13:e[0]="-",t=u+1|0;continue;case 14:e[9]=0;for(var i=u+1|0;function(n){return function(){var e=r.charCodeAt(n)-48|0;return+(e>=0&&e<=9)}}(i)();)e[9]=(Tr(e[9],10)+r.charCodeAt(i)|0)-48|0,i=i+1|0;t=i;continue;case 1:case 2:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 12:case 15:o=1;break;case 16:e[2]="0",t=u+1|0;continue;case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:o=3}}switch(o){case 1:t=u+1|0;continue;case 2:e[1]=String.fromCharCode(a),t=u+1|0;continue;case 3:e[6]=0;for(var f=u;function(n){return function(){var e=r.charCodeAt(n)-48|0;return+(e>=0&&e<=9)}}(f)();)e[6]=(Tr(e[6],10)+r.charCodeAt(f)|0)-48|0,f=f+1|0;t=f;continue;case 4:e[5]=1,e[4]=2,t=u+1|0;continue;case 5:e[5]=1,e[10]=String.fromCharCode(a),t=u+1|0;continue}}}function M(r,n){var e=r[0],t=r[1],u=r[2],a=r[3],o=r[4],c=r[5],i=r[6],f=r[7],s=r[8],l=n.length;c&&(s<0||"-"!==t)&&(l=l+1|0),a&&(o?1===o&&(l=l+2|0):l=l+1|0);var v="";if("+"===e&&" "===u)for(var h=l,d=i-1|0;h<=d;++h)v+=u;if(c&&(s<0?v+="-":"-"!==t&&(v+=t)),a&&0===o&&(v+="0"),a&&1===o&&(v+="0x"),"+"===e&&"0"===u)for(var g=l,w=i-1|0;g<=w;++g)v+=u;if(v=f?v+n.toUpperCase():v+n,"-"===e)for(var p=l,m=i-1|0;p<=m;++p)v+=" ";return v}function C(r,n){var e=k(r),t=e[9]<0?6:e[9],u=n<0?(e[8]=-1,-n):n,a="";if(isNaN(u))a="nan",e[2]=" ";else if(isFinite(u)){var o=e[10];switch(o){case"e":a=u.toExponential(t);var c=a.length;"e"===a[c-3|0]&&(a=a.slice(0,c-1|0)+"0"+a.slice(c-1|0));break;case"f":a=u.toFixed(t);break;case"g":var i=0!==t?t:1;a=u.toExponential(i-1|0);var f=a.indexOf("e"),s=0|Number(a.slice(f+1|0));if(s<-4||u>=1e21||u.toFixed().length>i){for(var l=f-1|0;"0"===a[l];)l=l-1|0;"."===a[l]&&(l=l-1|0),a=a.slice(0,l+1|0)+a.slice(f);var v=a.length;"e"===a[v-3|0]&&(a=a.slice(0,v-1|0)+"0"+a.slice(v-1|0))}else{var h=i;if(s<0)h=h-(s+1|0)|0,a=u.toFixed(h);else for(;function(){return a=u.toFixed(h),+(a.length>(i+1|0))}();)h=h-1|0;if(0!==h){for(var d=a.length-1|0;"0"===a[d];)d=d-1|0;"."===a[d]&&(d=d-1|0),a=a.slice(0,d+1|0)}}}}else a="inf",e[2]=" ";return M(e,a)}function _(r,n){if(n<0||n>=r.length)throw[Cr,"index out of bounds"];return r.charCodeAt(n)}function S(){return Dr[0]+=1,Dr[0]}function T(r){var n=S(0),e=[r,n];return e.tag=248,e}function D(r,n){return w(r,n)?r:n}function P(r,n){return g(r,n)?r:n}function R(r,n){return r+n}function F(r){return""+r}function E(r){for(var n=r.length,e=0;;){var t=e;if(t>=n)return R(r,".");var u=_(r,t);if(u>=48){if(u>=58)return r;e=t+1|0}else{if(45!==u)return r;e=t+1|0}}}function I(r){return E(C("%.12g",r))}function L(r,n){return r?[r[0],L(r[1],n)]:n}function O(){var r=localStorage.getItem(Pr);return null!==r?A(r):0}function q(r){return 0!=+(r>O(0))?(localStorage.setItem(Pr,F(r)),0):0}function J(r){return r.fillStyle="white",r.font="28px Joystix, monospace",r.textAlign="center",r}function U(r){return r.font="40px Joystix, monospace",r.fillText("shmup.re",Ir,Er),r.font="20px Joystix, monospace",r.fillText("A retro shooter in ReasonML",Ir,Er+40),r.fillText("Use the arrow and space keys",Ir,Er+80),0}function j(r,n,e){var t=n?n[0]:0,u=P(t,Lr);return e.textAlign="right",e.fillText("hi:"+F(u),br-20,40),e.textAlign="center",e.fillText(F(r),Ir,40),0}function N(r,n){return q(r),j(r,[r],n),n.fillText("Game Over",Ir,Er),0}function z(r){for(var n=0,e=r;;){var t=e,u=n;if(!t)return u;e=t[1],n=u+1|0}}function B(r,n){for(;;){var e=n,t=r;if(!t)return e;n=[t[0],e],r=t[1]}}function G(r){return r?L(r[0],G(r[1])):0}function K(r,n){if(n){return[i(r,n[0]),K(r,n[1])]}return 0}function V(r,n){for(;;){var e=n;{if(!e)return 0;i(r,e[0]),n=e[1]}}}function H(r,n,e){for(;;){var t=e,u=n;if(!t)return u;e=t[1],n=s(r,u,t[0])}}function Q(r){return function(n){for(var e=0,t=n;;){var u=t,a=e;if(!u)return B(a,0);var o=u[1],c=u[0];i(r,c)?(t=o,e=[c,a]):t=o}}}function W(r,n){return r.fillStyle=Ur,r.fillRect(n[0],n[1],2,4),0}function X(r){var n=r[2],e=18*Math.sin(n),t=18*Math.cos(n);return[r[0]+e,r[1]-t,n]}function Y(r){return+(r[1]>0)}function Z(r,n){var e=Math.random()*jr-jr/2;return 0!=+(z(r)>=15)?r:Or(r,[[n[0],n[1],e],0])}function $(r,n){var e=n[1],t=e[1],u=n[0],a=u[1],o=u[0],c=zr-Math.abs(e[0]/3);if(r.strokeStyle=Gr,r.beginPath(),r.moveTo(o,a+Br),r.lineTo(o+c,a+Nr),r.lineTo(o,a-Nr),r.lineTo(o-c,a+Nr),r.closePath(),r.stroke(),t<=-1.5){var i=2*-t;r.beginPath(),r.moveTo(o,a+Nr),r.lineTo(o+3,a+Nr+2),r.lineTo(o,a+Nr+i),r.lineTo(o-3,a+Nr+2),r.closePath(),r.stroke()}return V(function(n){return W(r,n)},n[2])}function rr(r,n){return[D(r[0]-20,P(20,n[0])),D(r[1]-20,P(20,n[1]))]}function nr(r,n){var e=H(function(r,n){var e=r[1],t=e[1],u=e[0],a=r[0];if("number"==typeof n)return[r[0],r[1],Z(r[2],[a[0],a[1]])];switch(0|n.tag){case 0:return[r[0],[u,t-D(10,n[0])],r[2]];case 1:return[r[0],[u,t+D(10,n[0])],r[2]];case 2:return[r[0],[u-D(10,n[0]),t],r[2]];case 3:return[r[0],[u+D(10,n[0]),t],r[2]]}},r,n),a=Jr(Y)(K(X,e[2])),o=t(7,u(.9,e[1])),c=o[1],i=o[0],f=r[0];return[rr([br,kr],[f[0]+i,f[1]+c]),[i,c],a]}function er(r){var n=r[0],e=r[1],t=n[0]+e[0],u=n[1]+e[1],a=[t,u],o=r[3]+.01;return[a,r[1],r[2],o]}function tr(r,n,e){for(var t=3+.1*(e-n),u=0;u<=8;++u){var a=u*(Vr/4),o=t*Math.sin(u+n),c=.002*(1500-(e-n)),i=o*Math.sin(a),f=o*Math.cos(a);r.fillRect(i,f,c,c)}return 0}function ur(r,n){var e=n[3],t=n[2],u=n[0],a=Date.now();if(r.save(),r.strokeStyle="white",r.translate(u[0],u[1]),t){var o=t[0];a<=o+1500&&tr(r,o,a)}else r.rotate(Vr/4-e),r.strokeRect(-1*Hr,-1*Hr,20,20),r.rotate(Vr/4-e),r.strokeRect(-1*Hr,-1*Hr,20,20);return r.restore(),0}function ar(r,n,e){return Jr(function(r){return+(r[0][1]<n+20)})(e)}function or(r){return[[br*Math.random(),-20],[Math.random()-.4,r*Math.random()+2],0,0]}function cr(r,n){var e=Date.now()-r|0,t=e/6e3|0;return 0!=+(0===p(e,P(20-t|0,2)))?Or(n,[or(t),0]):n}function ir(r,n,e,t){return+(Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2))<n+t)}function fr(r,n,e){return K(function(e){var t=e[0],u=t[1],a=t[0],o=10,c=H(function(r,n){return r?1:ir([a,u],o,[n[0],n[1]],1)},0,r);return e[2]||0===c?e:(i(n,0),[e[0],e[1],[Date.now()],e[3]])},e)}function sr(r,n){var e=r[1],t=r[0];return H(function(r,n){var u=n[0];return 0!==r?1:n[2]?0:ir([u[0],u[1]],10,[t,e],5)},0,n)}function lr(r,n){return n?n[0]:r}function vr(r){switch(r.preventDefault(),r.key){case" ":return Qr[4]=1,0;case"ArrowDown":return Qr[3]=[lr(1,Qr[3])],0;case"ArrowLeft":return Qr[0]=[lr(1,Qr[0])],0;case"ArrowRight":return Qr[1]=[lr(1,Qr[1])],0;case"ArrowUp":return Qr[2]=[lr(1,Qr[2])],0;default:return 0}}function hr(r){switch(r.key){case" ":return Qr[4]=0,0;case"ArrowDown":return Qr[3]=0,0;case"ArrowLeft":return Qr[0]=0,0;case"ArrowRight":return Qr[1]=0,0;case"ArrowUp":return Qr[2]=0,0;default:return 0}}function dr(){return document.addEventListener("keydown",vr),document.addEventListener("keyup",hr),0}function gr(){var r=Qr[2];if(r)Qr[2]=[r[0]+1|0];else{var n=Qr[3];n&&(Qr[3]=[n[0]+1|0])}var e=Qr[0];if(e)Qr[0]=[e[0]+1|0];else{var t=Qr[1];t&&(Qr[1]=[t[0]+1|0])}var u,a=Qr[4],o=0!==a?[0,0]:0,c=Qr[0];if(c){u=Qr[1]?0:[l(2,[c[0]]),0]}else{var i=Qr[1];u=i?[l(3,[i[0]]),0]:0}var f,s=Qr[2];if(s){f=Qr[3]?0:[l(0,[s[0]]),0]}else{var v=Qr[3];f=v?[l(1,[v[0]]),0]:0}return qr([u,[f,[o,0]]])}function wr(r,n){for(var e=0,t=n.length-1|0;e<=t;++e)i(r,n[e]);return 0}function pr(r,n,e,t){var u=n?n[0]:[0,0],a=u[1],o=u[0],c=e?e[0]:.2;return r.save(),r.fillStyle="rgba(255,255,255,"+I(1-c)+")",wr(function(n){var e=.03*t/c,u=n[0]+o,i=(n[1]+a+e)%kr;return r.fillRect(u,i,2,2),0},Wr),r.restore(),0}function mr(r){var n=J(r.getContext("2d")),e=function(){var r=Date.now(),t=r-Xr[4];switch(n.clearRect(0,0,br,kr),pr(n,0,[.6],t),pr(n,[[100,200]],0,t),V(function(r){return ur(n,r)},Xr[2]),Xr[0]){case 0:U(n);break;case 1:$(n,Xr[1]),j(Xr[3],0,n);break;case 2:N(Xr[3],n)}return requestAnimationFrame(e),0};return requestAnimationFrame(e),0}function xr(){var r,n=function(){return Xr[3]=Xr[3]+1|0,0},e=gr(0),t=Xr[0];switch(t){case 0:r=0;break;case 1:Xr[2]=fr(Xr[1][2],n,cr(Xr[4],ar(br,kr,K(er,Xr[2])))),Xr[1]=nr(Xr[1],e);r=0!==sr(Xr[1][0],Xr[2])?2:1;break;case 2:Xr[2]=K(er,Xr[2]),r=2}return Xr[0]=r,0}function yr(){return document.addEventListener("keydown",function(){return 0!==Xr[0]?0:(Xr[0]=1,0)}),0}function Ar(){var r=document.querySelector("canvas");return null!==r?mr(r):console.log("couldnt get canvas"),dr(0),yr(0),setInterval(xr,33)}Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"ReasonJs",function(){return Yr}),e.d(n,"V",function(){return Zr}),e.d(n,"Canvas",function(){return $r}),e.d(n,"StarField",function(){return rn}),e.d(n,"Ship",function(){return nn}),e.d(n,"Enemy",function(){return en}),e.d(n,"Input",function(){return tn}),e.d(n,"Ui",function(){return un}),e.d(n,"gameState",function(){return Xr}),e.d(n,"setupDraw",function(){return mr}),e.d(n,"gameLoop",function(){return xr}),e.d(n,"startOnAnyKey",function(){return yr}),e.d(n,"init",function(){return Ar});var br=500,kr=700,Mr=["Failure",-2],Cr=["Invalid_argument",-3],_r=["Division_by_zero",-5],Sr=["Assert_failure",-10];Mr.tag=248,Cr.tag=248,_r.tag=248,Sr.tag=248;var Tr=Math.imul||function(r,n){return n|=0,((r>>16)*n<<16)+(65535&r)*n|0},Dr=[0],Pr=(T("Pervasives.Exit"),"hiScore"),Rr=br/2,Fr=kr/2,Er=Fr,Ir=Rr,Lr=O(0),Or=L,qr=G,Jr=Q,Ur="white",jr=Math.PI/32,Nr=10,zr=10,Br=5,Gr="white",Kr=[[300,500],[0,0],0],Vr=Math.PI,Hr=10,Qr=[0,0,0,0,0],Wr=(T("Js_exn.Error"),T("Array.Bottom"),v([[100,100],[150,290],[190,540],[350,210],[550,390],[600,10]])),Xr=[0,Kr,0,0,Date.now()];Ar(0);var Yr=0,Zr=0,$r=0,rn=0,nn=0,en=0,tn=0,un=0}});